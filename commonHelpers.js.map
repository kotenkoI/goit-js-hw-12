{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(searchQuery, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const params = {\n    key: '43032032-8eb24f10be4f06f56a6a96441',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const res = await axios.get(BASE_URL, { params });\n  return res.data;\n}","import { refs, lightbox } from '../main.js';\n\nfunction imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${webformatURL}\">\n        <img loading=\"lazy\" class=\"gallery-image\" src=\"${largeImageURL}\" alt=\"${tags}\" />\n      </a>\n        <div class=\"image-info\">\n    <ul class=\"infoBlock\">\n    <li class=\"title\">Likes</li>\n    <li class=\"info\">${likes}</li>\n    </ul>\n    <ul class=\"infoBlock\">\n    <li class=\"title\">Views</li>\n    <li class=\"info\">${views}</li>\n    </ul>\n    <ul class=\"infoBlock\">\n    <li class=\"title\">Comments</li>\n    <li class=\"info\">${comments}</li>\n    </ul>\n    <ul class=\"infoBlock\">\n    <li class=\"title\">Downloads</li>\n    <li class=\"info\">${downloads}</li>\n    </ul>\n    </div>\n  </li>`;\n}\n\nfunction imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\nexport function renderGallery(arr) {\n  const markup = imagesTemplate(arr);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}","import iziToast from 'izitoast'; // Описаний у документації\nimport 'izitoast/dist/css/iziToast.min.css'; // Додатковий імпорт стилів\n\nimport SimpleLightbox from 'simplelightbox'; // Описаний у документації\nimport 'simplelightbox/dist/simple-lightbox.min.css'; // Додатковий імпорт стилів\n\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nexport const refs = {\n  formEl: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.loadMore'),\n};\n\nlet searchQuery;\nlet currentPage = 1;\nlet maxPage = 0;\nconst perPage = 15;\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\ndeleteLoader();\nhideLoadMore();\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  createLoader();\n\n  searchQuery = e.target.elements.request.value.trim();\n  refs.gallery.innerHTML = '';\n  currentPage = 1;\n\n  if (!searchQuery) {\n    deleteLoader();\n    hideLoadMore();\n    iziToast.error({\n      message: 'Please enter a request',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  try {\n    const data = await getImages(searchQuery, currentPage);\n    console.log(data);\n    if (data.hits.length === 0) {\n      deleteLoader();\n      hideLoadMore();\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    maxPage = Math.ceil(data.totalHits / perPage);\n    renderGallery(data.hits);\n  } catch (err) {\n    console.log(err);\n  }\n\n  deleteLoader();\n  checkBtnStatus();\n  refs.formEl.reset();\n}\n\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  createLoader();\n  try {\n    const data = await getImages(searchQuery, currentPage);\n    renderGallery(data.hits);\n  } catch (err) {\n    console.log(err);\n  }\n\n  myScroll();\n  checkBtnStatus();\n  deleteLoader();\n}\n\nfunction showLoadMore() {\n  refs.btnLoadMore.classList.remove('is-hidden');\n}\nfunction hideLoadMore() {\n  refs.btnLoadMore.classList.add('is-hidden');\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\n\nfunction deleteLoader() {\n  refs.loaderEl.classList.add('is-hidden');\n}\n\nfunction createLoader() {\n  refs.loaderEl.classList.remove('is-hidden');\n}\n\nfunction myScroll() {\n  const height = refs.gallery.firstChild.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["getImages","searchQuery","currentPage","BASE_URL","params","axios","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","arr","renderGallery","markup","refs","lightbox","SimpleLightbox","maxPage","perPage","onFormSubmit","onLoadMoreClick","deleteLoader","hideLoadMore","e","createLoader","iziToast","data","err","checkBtnStatus","myScroll","showLoadMore","height"],"mappings":"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"}